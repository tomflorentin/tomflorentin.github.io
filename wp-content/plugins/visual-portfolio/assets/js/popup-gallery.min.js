!function(){var e=window.jQuery,t=window.VPData.settingsPopupGallery,i={vendor:!1,vendors:[{vendor:"youtube",embedUrl:"https://www.youtube.com/embed/{{video_id}}",pattern:/(https?:\/\/)?(www.)?(youtube\.com|youtu\.be|youtube-nocookie\.com)\/(?:embed\/|v\/|watch\?v=|watch\?list=(.*)&v=|watch\?(.*[^&]&)v=)?((\w|-){11})(&list=(\w+)&?)?/,patternIndex:6},{vendor:"vimeo",embedUrl:"https://player.vimeo.com/video/{{video_id}}",pattern:/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,patternIndex:3}],init:function(){},open:function(){},close:function(){},parseVideo:function(e){var t=!1;return i.vendors.forEach((function(i){if(!t){var o=e.match(i.pattern),p=!(!o||!o[i.patternIndex])&&o[i.patternIndex];if(p)if(i.embedCallback)t=i.embedCallback(e,o);else{var r=i.embedUrl;r=(r=(r=r.replace(/{{video_id}}/g,p)).replace(/{{video_url}}/g,e)).replace(/{{video_url_encoded}}/g,encodeURIComponent(e));var a=i.width||1920,l=i.height||1080;t={vendor:i.vendor,id:p,embed:'<iframe width="'.concat(a,'" height="').concat(l,'" src="').concat(r,'" scrolling="no" frameborder="0" allowTransparency="true" allow="autoplay; fullscreen; encrypted-media" allowfullscreen></iframe>'),embedUrl:r,url:e,width:a,height:l}}}})),t||{vendor:"unknown",id:e,url:e,embedUrl:e,embed:'<iframe width="1920" height="1080" src="'.concat(e,'" scrolling="no" frameborder="0" allowTransparency="true" allow="autoplay; fullscreen; encrypted-media" allowfullscreen></iframe>')}},parseGallery:function(t){var o,p,r,a,l,n=[];return t.find(".vp-portfolio__item-wrap:not(.swiper-slide-duplicate):not(.swiper-slide-duplicate-active)").each((function(){if((o=e(this).find(".vp-portfolio__item-popup"))&&o.length){if(p=(o.attr("data-vp-popup-img-size")||"1920x1080").split("x"),a=o.attr("data-vp-popup-video"),l=!1,a&&(l=i.parseVideo(a)),l)r={type:"embed",el:this,src:l.embedUrl,embed:l.embed,width:l.width||1920,height:l.height||1080};else{r={type:"image",el:this,src:o.attr("data-vp-popup-img"),srcset:o.attr("data-vp-popup-img-srcset"),width:parseInt(p[0],10),height:parseInt(p[1],10)};var t=o.attr("data-vp-popup-sm-img")||r.src;if(t){var c=(o.attr("data-vp-popup-sm-img-size")||o.attr("data-vp-popup-img-size")||"1920x1080").split("x");r.srcSmall=t,r.srcSmallWidth=parseInt(c[0],10),r.srcSmallHeight=parseInt(c[1],10)}var d=o.attr("data-vp-popup-md-img")||r.src;if(d){var s=(o.attr("data-vp-popup-md-img-size")||o.attr("data-vp-popup-img-size")||"1920x1080").split("x");r.srcMedium=d,r.srcMediumWidth=parseInt(s[0],10),r.srcMediumHeight=parseInt(s[1],10)}var m=o.children(".vp-portfolio__item-popup-title").get(0),u=o.children(".vp-portfolio__item-popup-description").get(0);(m||u)&&(r.caption=(m?m.outerHTML:"")+(u?u.outerHTML:""))}n.push(r)}})),n}};function o(e){return/(.png|.jpg|.jpeg|.gif|.tiff|.tif|.jfif|.jpe|.svg|.bmp|.webp)$/.test(e.href.toLowerCase().split("?")[0].split("#")[0])}function p(t){var i=e(t),o=t.childNodes[0],p=i.next("figcaption");return"NOSCRIPT"===o.nodeName&&t.childNodes[1]&&(o=t.childNodes[1]),!p.length&&i.parent(".gallery-icon").length&&(p=i.parent(".gallery-icon").next("figcaption")),(p=p.html())&&(p='<div class="vp-portfolio__item-popup-description">'.concat(p,"</div>")),{type:"image",el:o,linkEl:t,src:t.href,caption:p}}window.VPPopupAPI=i,e(document).on("extendClass.vpf",(function(t,o){"vpf"===t.namespace&&(o.prototype.initPopupGallery=function(){var t=this;t.options.itemsClickAction&&"popup_gallery"===t.options.itemsClickAction&&(t.isPreview()||t.$item.on("click.vpf-uid-".concat(t.uid),".vp-portfolio__item a.vp-portfolio__item-meta, .vp-portfolio__item .vp-portfolio__item-img > a, .vp-portfolio__item .vp-portfolio__item-meta-title > a, .vp-portfolio__item a.vp-portfolio__item-overlay",(function(o){var p=e(this);if(p.closest(".vp-portfolio__item-wrap").find(".vp-portfolio__item-popup").length){o.preventDefault();var r=-1,a=p.closest(".vp-portfolio__item")[0];t.$item.find(".vp-portfolio__item-wrap:not(.swiper-slide-duplicate):not(.swiper-slide-duplicate-active) .vp-portfolio__item-popup").each((function(t){-1===r&&e(this).closest(".vp-portfolio__item-wrap").find(".vp-portfolio__item")[0]===a&&(r=t)})),0>r&&(r=0);var l=i.parseGallery(t.$item);i.open(l,r,t)}})))},o.prototype.destroyPopupGallery=function(){var e=this;e.options.itemsClickAction&&"popup_gallery"===e.options.itemsClickAction&&(e.$item.off("click.vpf-uid-".concat(e.uid)),e.emitEvent("destroyPopupGallery"))})})),e(document).on("init.vpf",(function(e,t){"vpf"===e.namespace&&t.initPopupGallery()})),e(document).on("destroy.vpf",(function(e,t){"vpf"===e.namespace&&t.destroyPopupGallery()})),t.enable_on_wordpress_images&&e(document).on("click","\n        .wp-block-image > a,\n        .wp-block-image > figure > a,\n        .wp-block-gallery .blocks-gallery-item > figure > a,\n        .wp-block-media-text > figure > a,\n        .gallery .gallery-icon > a,\n        figure.wp-caption > a,\n        figure.tiled-gallery__item > a,\n        p > a\n    ",(function(t){if(this.childNodes.length){var r=this.childNodes[0];if("NOSCRIPT"===r.nodeName&&this.childNodes[1]&&(r=this.childNodes[1]),("IMG"===r.nodeName||"PICTURE"===r.nodeName)&&o(this)){t.preventDefault();var a=e(this),l=[],n=p(this),c=a.closest(".wp-block-gallery, .gallery, .tiled-gallery__gallery"),d=0;if(c.length){var s=c.find(".blocks-gallery-item > figure > a, .gallery-icon > a, figure.tiled-gallery__item > a"),m=0;s.each((function(){o(this)&&(this===n.linkEl&&(d=m),l.push(p(this)),m+=1)}))}else l.push(n);i.open(l,d)}}}))}();